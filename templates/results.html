<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ´Ø®ÙŠØµ</title>
    <style>
        /* 1. Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†) */
        body { 
            font-family: 'Arial', sans-serif; 
            background-color: #121212; 
            text-align: right; 
            direction: rtl; 
            color: #e0e0e0;
        }
        .container { 
            width: 90%; 
            max-width: 700px; 
            margin: 50px auto; 
            padding: 30px; 
            background-color: #1e1e1e; 
            border-radius: 15px; 
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            border: 1px solid #333;
        }
        h2 { 
            color: #007bff; 
            text-align: center; 
            margin-bottom: 25px; 
            padding-bottom: 10px; 
            border-bottom: 2px solid #007bff; 
        }
        
        /* 2. ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-box {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            background-color: #2c2c2c; 
            border: 1px solid #444;
        }
        .diagnosis-text {
            font-size: 1.5em;
            color: #e0e0e0;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .confidence-score {
            font-size: 1.2em;
            color: #00bcd4;
            font-weight: bold;
            margin-top: 5px;
        }
        
        /* 3. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ */
        .symptoms-list {
            list-style-type: none;
            padding: 0;
        }
        .symptoms-list li {
            background: #2c2c2c;
            margin: 5px 0;
            padding: 8px;
            border-radius: 5px;
            border-right: 3px solid #4caf50;
        }
        
        /* 4. ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªÙˆØµÙŠØ§Øª */
        .recommendation {
            border: 1px solid #4caf50;
            padding: 15px;
            margin-top: 25px;
            border-radius: 10px;
            background-color: #1e3a24;
            color: #a5d6a7;
        }
        .recommendation-danger {
            border: 1px solid #f44336;
            background-color: #4a1c1c;
            color: #ffcdd2;
        }
        
        /* 5. Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© ÙˆØ²Ø± Ø§Ù„Ø­Ø¬Ø² */
        .action-btn {
            display: block;
            width: 50%;
            margin: 15px auto 0; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
            padding: 12px;
            text-align: center;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .book-btn {
            background-color: #28a745; /* Ø£Ø®Ø¶Ø± Ù„Ù„Ø­Ø¬Ø² */
            color: white;
        }
        .book-btn:hover {
            background-color: #218838;
        }
        .back-btn {
            background-color: #007bff;
            color: white;
        }
        .back-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        {% set final_score = score | float %} 
        
        <h2>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø£ÙˆÙ„ÙŠ ğŸ©º</h2>

        <div class="result-box">
            <div class="diagnosis-text">
                Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ©: 
                <span style="color: #00bcd4;">{{ diagnosis }}</span>
            </div>
            
            <div class="confidence-score">
                Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ù‚Ø© Ø¨Ø§Ù„ØªØ´Ø®ÙŠØµ (Confidence Score): 
                <span style="color: #00bcd4;">{{ "%.2f"|format(final_score) }}%</span>
            </div>
        </div>

        <h3>Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø§Ù„Ù…Ø¯Ø®Ù„Ø©:</h3>
        {% if symptoms %}
            <ul class="symptoms-list">
                {% for symptom in symptoms %}
                    <li>{{ symptom }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø£Ø¹Ø±Ø§Ø¶.</p>
        {% endif %}

        {% if diagnosis == "Ø¹Ø¯Ù… ØªØ´Ø®ÙŠØµ" or final_score < 40 %}
            {% set recommendation_text = "Ù†Ø¸Ø±Ø§Ù‹ Ù„Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø¨Ø´ÙƒÙ„ ÙƒØ§ÙÙ Ø£Ùˆ Ù„Ù‚Ù„Ø© Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ù‚Ø©ØŒ Ù†ÙˆØµÙŠ Ø¨Ø´Ø¯Ø© Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ø¨ÙŠØ¨ Ø¨Ø´Ø±ÙŠ Ù…Ø®ØªØµ Ù„Ø¥Ø¬Ø±Ø§Ø¡ ÙØ­Øµ Ø¯Ù‚ÙŠÙ‚." %}
            <p class="recommendation recommendation-danger">
                *âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù…:* {{ recommendation_text }}
            </p>
        {% else %}
            {% set recommendation_text = "Ø¨Ù…Ø§ Ø£Ù† Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©ØŒ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù…Ø«Ù„ Ø§Ù„Ø±Ø§Ø­Ø© ÙˆØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø³ÙˆØ§Ø¦Ù„. Ù†ÙˆØµÙŠ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙÙŠ Ø­Ø§Ù„ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø£Ùˆ ØªÙØ§Ù‚Ù…Ù‡Ø§." %}
            <p class="recommendation">
                *âœ… ØªÙˆØµÙŠØ§Øª Ø£ÙˆÙ„ÙŠØ©:* {{ recommendation_text }}
            </p>
        {% endif %}

        <div style="margin-top: 30px;">
            <a href="{{ url_for('book_appointment') }}" class="action-btn book-btn">
               Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ Ø§Ù„Ø¢Ù† ğŸ—“ï¸
            </a>
            
            <a href="{{ url_for('medical_consultation') }}" class="action-btn back-btn">
                Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </a>
        </div>
    </div>
</body>
</html>